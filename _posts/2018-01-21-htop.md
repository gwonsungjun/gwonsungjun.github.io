---
title: 'htop'  
layout: post  
tags : htop, ubuntu, linux
category: linux
subtitle: ubuntu(linux) 시스템 모니터링 도구 'htop' 간단 설명
published : false
author : sungjun
---

**ubuntu(linux) 시스템 모니터링 도구 'htop' 간단 설명** 

---

### htop
 
회사의 테스트 서버, AWS 스테이징 & 상용 서버, 집에서 사용하는 노트북 전부 우분투이다. 우분투를 사용하면서 메모리나 CPU 성능 확인을 위해 지금까지 top 명령어를 자주 사용했는데 top 보다 훨씬 보기 편하고 접근성이 좋은 툴인 htop를 발견했다.

![htop](/assets/images/usingimages/htop.png)

### 설치방법
- sudo apt-get install htop

### 특징
- top와 다르게 마우스로 클릭이 가능하다.
- htop 화면을 살펴보면 왼쪽 상단에 CPU,swap메모리,메모리 사용률이 표현되어 있으며,하단에는 모니터링 되고 있는 프로세스가 보인다. 기본적으로 1초에 한번 갱신이 된다.
- 선택된 프로세스를 죽이거나, 우선순위를 변경할 수 있다.
- 특정 프로세스 이름으로 검색, 필터링 하여 현황을 볼 수 있다.
- pstree와 top을 함께 보는 기능이 있다.


### 시스템 전체 CPU 사용률
최상단 왼쪽에 CPU/코어별 사용률이 나타난다. 막대기의 색이 의미하는 바는 다음과 같다. (F1 - 도움말을 통해서도 확인가능)
- 파랑: 우선 순위가 낮은 프로세스(nice > 0)
- 초록: 일반(사용자) 프로세스
- 빨강: 커널 프로세스
- 노랑: IRQ time
- 자주: Soft IRQ time
- 회색: IO Wait time

### 시스템 전체 메모리 사용률
CPU 사용률 아래에 메모리와 스왑 사용량이 있다. 마찬가지로 색이 있는데 의미하는 바는 아래와 같다.
- 초록: 사용 중인 메모리 페이지
- 파랑: 버퍼 페이지
- 노랑: 캐쉬 페이지

### 평균 부하율(Load average)
- 일정 시간 동안의 평균 부하율로 top이나 uptime과 마찬가지로 1, 5, 15분 평균 수치가 나온다. 싱글 코어 CPU일 때 1.0이면 사용률이 100%임을 의미한다. 쿼드 코어라면 4.0이 100%인 셈. 다만 이때 1.0을 넘을 수도 있는데 이는 CPU를 할당받기 위해 프로세스들이 기다려야 함을 뜻한다.

### 프로세스 정보
- PID: 프로세스의 프로세스 ID 번호
- USER: 프로세스의 소유자
- PR: 프로세스의 우선순위
- NI: 우선순위에 영향을 주는 프로세스의 nice 값
- VIRT: 프로세스가 사용 중인 가상 메모리 양
- RES: 프로세스가 사용 중인 물리 RAM의 양(단위는 킬로바이트)
- SHR: 프로세스가 사용 중인 공유 메모리 양
- S: 프로세스의 현재 상태(zombied, sleeping, running, uninterruptedly sleeping, traced)
- %CPU: 프로세스가 프로세서를 사용한 시간의 백분율
- %MEM : 프로세스가 사용 중인 물리 RAM의 백분율
- TIME+: 프로세스가 프로세서를 사용한 시간
- COMMAND: 프로세스 시작에 사용한 명령어명

### 단축키 설명
- **F1** : htop의 도움말을 볼 수 있으며, 단축키의 기능을 알 수 있다.
- **F2** : 설정, 설정에서는 상단에 보여줄 CPU. 메모리에 대한 정보를 추가/제거 할 수 있으며, 디스플레이 옵션 설정도 가능하다
- **F3** : F3 또는 “/” 눌러 해당 프로세스를 검색할 수 있다
- **F4** : 원하는 프로세스만 모니터링 할 수 있는 기능이다.(grep과 유사)
- **F5** : pstree명령어와 같은 기능으로 프로세스의 부모 자식 관계를 트리 형태로 보여주는 기능이며, 한번 더 키를 입력하면 트리를 보여 주거나 그 반대 기능을 한다.“+”.”-” 키를 이용해 트리를 펼치거나 접을 수 있다.
- **F6** : 프로세스를 CPU,메모리,사용자,우선순위, 프로세스이름 등 원하는 방식으로 정렬하여 보다 쉽게 모니터링 할 수 있다.
- **F7, F8**: 프로세스의 우선 순위을 바꾸는 단축키이다. 해당 프로세스를 선택하여 F7 또는 "]"키를 사용하여 높이며, "F8"키 또는 "["키를 사용하여 우선순위를 내릴 수 있다.
- **F9** :프로세스를 종료 시키는 단축키이다. 보통 프로세스를 종료 시키려면ps명령어로 해당 PID를 찾아 kill -9 PID 명령어로 종료 시킨다. htop에서 해 당 프로세스를 선택 후 F9 또는 “k”키를 입력하여 해당 프로세스를 종료시킬 수 있다.
- **F10** : 종료  
- **l** : 그 프로세스가 열고 있는 파일들을 볼 수 있다.
- **u** : 특정 사용자의 프로세스만 볼 수 있다.
- **k**: 현재 또는 선택된 프로세스를 종료 할 수 있다.
- **M** 메모리 사용량으로 프로세스를 정렬 할 수 있다.
- **P**: CPU 사용량으로 프로세스를 정렬 할 수 있다.

### Links
- [Htop( Linux Process Monitoring )사용법](http://www.koreaidc.com/bbs/set_view.php?b_name=idcpds&w_no=191)
- [시스템 자원 모니터링 프로그램 htop](http://www.myservlab.com/174)
- [htop : top 보다 사용자 위주의 모니터링 도구](https://www.linux.co.kr/home2/board/subbs/board.php?bo_table=lecture&wr_id=1791)
